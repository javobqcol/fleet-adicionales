<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <record id='fleet.fleet_vehicle_odometer_view_form' model='ir.ui.view'>
      <field name="name">fleet.vehicle.odometer.form</field>
      <field name="model">fleet.vehicle.odometer</field>
      <field name="arch" type="xml">
        <form string="Registro de Odometros de vehiculos">
          <sheet>
            <group col="2">
              <group>
                <field name="vehicle_id" string="Vehiculo"/>
                <field name="company_id"
                       string="Compañia"
                       groups="base.group_multi_company"
                       options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/>
                <field name="driver_id" string="Conductor"/>
                <field name="work_id" string="Trabajo"/>
                <field name="recibo"/>
              </group>
              <group>
                <field name="date" string="Fecha"/>
                <field name="value" string="Odometro Inicial" class="oe_inline"/>
                <field name="value_final" string="Odometro Final" class="oe_inline"/>
                <field name="total_unidades" string="Diferencia" class="oe_inline"/>
                <field name="unit" class="oe_inline"/>
                <field name="es_standby" groups="fleet.fleet_group_manager"/>
                <field name="hora_cancelada" groups="fleet.fleet_group_manager"/>
                <field name="unidades_standby" invisible="1"/>
                <field name="precio_unidad" invisible="1"/>
                <field name="valor_unidades" invisible="1"/>
                <field name="valor_standby" invisible="1"/>
              </group>
            </group>
            <group string="Notas">
              <field nolabel="1" name="descripcion" placeholder="Escriba aqui cualquier otra informacion relativa al servicio que considere relevante."/>
            </group>
          </sheet>
       </form>
     </field>
    </record>

    <record id='fleet.fleet_vehicle_odometer_view_tree' model='ir.ui.view'>
      <field name="name">fleet.vehicle.odometer.tree</field>
      <field name="model">fleet.vehicle.odometer</field>
      <field name="arch" type="xml">
        <tree string="Registro de odometro"  decoration-info="tipo_odometro == 'fuel'" decoration-primary="tipo_odometro =='services'">
          <field name="date" string="fecha"/>
          <field name="vehicle_id" optional="show" string="Vehiculo"/>
          <field name="company_id"  optional="show" string="Compañia" groups="base.group_multi_company"/>
          <field name="driver_id"  optional="show" string="Conductor"/>
          <field name="tipo_odometro" optional="show" string="Tipo"/>
          <field name="work_id" optional="show" string="Trabajo"/>
          <field name="recibo" optional="show" string="Recibo"/>
          <field name="value" string="Od. Inicial" class="oe_inline"/>
          <field name="value_final" string="Od. Final" class="oe_inline"/>
          <field name="total_unidades" sum="suma Unidades" string="Dif." class="oe_inline"/>
          <field name="unit" class="oe_inline"/>
          <field name="es_standby" invisible="1"/>
          <field name="hora_cancelada" invisible="1"/>
        </tree>
      </field>
    </record>

    <record id='fleet.fleet_vehicle_odometer_view_kanban' model='ir.ui.view'>
      <field name="name">fleet.vehicle.odometer.kanban</field>
      <field name="model">fleet.vehicle.odometer</field>
      <field name="arch" type="xml">
        <kanban class="o_kanban_mobile">
          <templates>
            <t t-name="kanban-box">
              <div t-attf-class="oe_kanban_global_click">
                <div>
                  <strong>
                    <field name="vehicle_id" string="Vehiculo"/>
                    <span class="float-right"><field name="date"/></span>
                  </strong>
                </div>
                <div>
                  <span><field name="driver_id"/></span>
                  <span class="float-right"><field name="work_id"/></span>
                </div>
                <div>
                  <span class="float-right"><field name="value"/></span>
                  <span class="float-left"><field name="value_final"/></span>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <record id='fleet.fleet_vehicle_odometer_view_search' model='ir.ui.view'>
      <field name="name">fleet.vehicle.odometer.search</field>
      <field name="model">fleet.vehicle.odometer</field>
      <field name="arch" type="xml">
        <search string="Odometros de los vehiculos" >
          <field name="vehicle_id" string="Vehiculo"
                 filter_domain="[('vehicle_id.name','ilike',self)]"/>
          <field name="recibo" string="Recibo"/>
          <field name="driver_id" string="Conductor"
                 filter_domain="[('driver_id.name','ilike',self)]"/>
          <field name="work_id" string="Trabajo"
                     filter_domain="['|',('work_id.name_seq','ilike',self), ('work_id.contractor_id.name','ilike',self)]"/>
          <field name="value" string="Odometro"/>
          <field name="date" string="Fecha"/>
          <group expand="1" string="Agrupado por">
            <filter name="groupby_company_id" context="{'group_by': 'company_id'}" string="Compañia" groups="base.group_multi_company"/>
            <filter name="groupby_vehicle_id" context="{'group_by': 'vehicle_id'}" string="Vehiculo"/>
            <filter name="groupby_date" context="{'group_by':'date:month'}" string="Fecha"/>
            <filter name="groupby_driver_id" context="{'group_by': 'driver_id'}" string="Conductor"/>
            <filter name="groupby_work" context="{'group_by': 'work_id'}" string="Trabajo"/>
          </group>
        </search>
      </field>
    </record>

    <record id="fleet.fleet_vehicle_odometer_view_graph" model="ir.ui.view">
     <field name="name">fleet.vehicle.odometer.graph</field>
     <field name="model">fleet.vehicle.odometer</field>
     <field name="arch" type="xml">
        <graph string="Odometer Values Per Vehicle">
          <field name="vehicle_id" string="Vehiculo" type="row"/>
          <field name="value" string="Odometro" type="measure"/>
        </graph>
      </field>
    </record>

    <record id='fleet.fleet_vehicle_odometer_action' model='ir.actions.act_window'>
      <field name="name">Odometros de los Vehiculos</field>
      <field name="res_model">fleet.vehicle.odometer</field>
      <field name="view_mode">tree,form,kanban,graph</field>
      <field name="context">{"search_default_groupby_vehicle" : True}</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Cree unanueva entrada de odometro
        </p><p>
          Usted puede adicionar varias entradas para todos los vehiculos.
        </p>
      </field>
    </record>
  </data>
</odoo>